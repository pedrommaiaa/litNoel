---
import Layout from '../layouts/Layout.astro';
import Problems from '../components/Problems.astro';
import SiteHeader from '../components/SiteHeader.astro';
import SiteFooter from '../components/SiteFooter.astro';
import HeroDynamic from '../components/HeroDynamic.astro';
import ServiceBullets from '../components/ServiceBullets.astro';
import HowItWorks from '../components/HowItWorks.astro';
import FAQAccordion from '../components/FAQAccordion.astro';
import ContactSchedule from '../components/ContactSchedule.astro';
import AreasStrip from '../components/AreasStrip.astro';
import { makeCityTitle, makeCityDesc, cityIntro, cityLocalCopy } from '../data/seo';
import type { CountyInfo, CityInfo } from '../data/geo';

export interface Props { county: CountyInfo; city: CityInfo }
const { county, city } = Astro.props;

const title = makeCityTitle(city.name);
const description = makeCityDesc(city.name, county.name);
---

<Layout title={title} description={description} ogTitle={title} ogDescription={description}>
  <script type="application/ld+json" set:html={JSON.stringify({
    '@context': 'https://schema.org',
    '@type': 'BreadcrumbList',
    itemListElement: [
      { '@type': 'ListItem', position: 1, name: 'Home', item: 'https://litnoel.com/' },
      { '@type': 'ListItem', position: 2, name: county.name, item: `https://litnoel.com/christmas-light-installation-${county.slugCounty}-county-ga/` },
      { '@type': 'ListItem', position: 3, name: city.name }
    ]
  })} />
  <script type="application/ld+json" set:html={JSON.stringify({
    '@context': 'https://schema.org', '@type': 'Service',
    name: `Christmas Light Installation in ${city.name}`,
    areaServed: { '@type': 'City', name: city.name },
    provider: { '@type': 'LocalBusiness', name: 'Lit Noel' }
  })} />
  <SiteHeader />
  
  <HeroDynamic title={`Christmas Light Installation in ${city.name}, GA`} subhead={cityIntro(city.name)} />

  <!-- Visual example for city page (two‑story warm‑white roofline) -->
  <section class="py-8 bg-white">
    <div class="container mx-auto px-4">
      <picture>
        <source srcset="/photos/outdoor-holiday-lighting-mableton-ga-800.webp 800w, /photos/outdoor-holiday-lighting-mableton-ga-1200.webp 1200w, /photos/outdoor-holiday-lighting-mableton-ga-1600.webp 1600w, /photos/outdoor-holiday-lighting-mableton-ga-2000.webp 2000w" type="image/webp" />
        <img src="/photos/outdoor-holiday-lighting-mableton-ga-1200.webp" alt={`Professional warm‑white C9 roofline in ${city.name}`} class="w-full h-72 object-cover rounded-lg shadow" loading="lazy" width="1200" height="800" />
      </picture>
    </div>
  </section>

  <!-- About City should appear right after hero -->
  <section class="py-16 bg-white" id="about-city">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-6 text-gray-900">About {city.name}</h2>
      <div class="text-gray-700 text-lg max-w-3xl mx-auto leading-relaxed">
        {cityLocalCopy(city, county).split('\n').map((para) => (<p class="mb-4">{para}</p>))}
        <p class="mb-4">Looking beyond {city.name}? Explore our {county.name} hub for more local information, coverage details, and links to nearby cities.</p>
        <div class="mt-4 text-base">
          <p class="mb-2">Helpful links:</p>
          <ul class="list-disc ml-5">
            <li><a class="text-red-700 hover:text-red-800 underline" href={`/christmas-light-installation-${county.slugCounty}-county-ga/`}>{county.name} Christmas Light Installation</a></li>
            {(county.cities.filter((c) => c.slugCity !== city.slugCity).slice(0,2)).map((sibling) => (
              <li><a class="text-red-700 hover:text-red-800 underline" href={`/christmas-light-installation-${sibling.slugCity}-ga/`}>{sibling.name} Christmas Light Installation</a></li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  </section>


  <Problems />
  <ServiceBullets />
  <HowItWorks />
  <AreasStrip />
  <FAQAccordion />
  <ContactSchedule />
  <SiteFooter />
</Layout>


